# Template file for 'eswm1'
pkgname=eswm1
version=0.1.0
revision=1
build_style=gnu-configure
configure_args="--with-locales-dir=/usr/share/locale"
wrksrc="eswm-master"
hostmakedepends="pkg-config intltool gettext-devel xfce4-dev-tools gdk-pixbuf-devel librsvg"
makedepends="libexpidus1ui-devel startup-notification-devel
 libXcomposite-devel libXdamage-devel libXfixes-devel libXrandr-devel
 libXrender-devel libXpresent-devel libwnck-devel libdevident-devel"
depends="hicolor-icon-theme desktop-file-utils"
short_desc="Window manager for ExpidusOS"
maintainer="Tristan Ross <rosscomputerguy@protonmail.com>"
license="GPL-2.0-or-later"
homepage="http://expidusos.com/"
distfiles="https://github.com/ExpidusOS/eswm/archive/master.tar.gz"
checksum=46b732ba7bfa006c495d97dcf1ca6cde98edd3206a1f7c5ddac7bfb8867b692c

post_patch() {
	# compositor may be buggy on old and big endian hardware
	if [ "$XBPS_TARGET_WORDSIZE" = "32" -o "$XBPS_TARGET_ENDIAN" = "be" ]; then
		vsed -i '/use_compositing/s/true/false/' defaults/defaults
	fi
}

do_configure() {
	./autogen.sh ${configure_args} --enable-gtk-doc
}
